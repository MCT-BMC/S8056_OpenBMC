require conf/machine/include/ast2600.inc
require conf/machine/include/obmc-bsp-common.inc
require conf/machine/include/mct.inc

# Overwrite flash layout
FLASH_SIZE = "65536"
FLASH_UBOOT_SPL_SIZE = "64"
FLASH_UBOOT_OFFSET = "0"
FLASH_KERNEL_OFFSET = "1024"
FLASH_ROFS_OFFSET = "10240"

# U-Boot Build Settings
UBOOT_MACHINE = "ast2600_openbmc_spl_defconfig"
UBOOT_DEVICETREE = "ast2600-s8053"
SPL_BINARY = "spl/u-boot-spl.bin"
SOCSEC_SIGN_ENABLE = "0"

SERIAL_CONSOLES = "115200;ttyS4"

# Kernel Build Settings
KMACHINE = "aspeed"
KERNEL_DEVICETREE = "${KMACHINE}-bmc-mct-${MACHINE}.dtb"

EXTRA_USERS_PARAMS:pn-obmc-phosphor-image = " \
  usermod -p '$(openssl passwd -1 root)' root; \
  "

PREFERRED_PROVIDER_virtual/obmc-host-ctl = "packagegroup-mct-apps"
PREFERRED_RPROVIDER_virtual/phosphor-ipmi-config = "${MACHINE}-ipmi-config"

DISTRO_FEATURES:remove = "avahi"