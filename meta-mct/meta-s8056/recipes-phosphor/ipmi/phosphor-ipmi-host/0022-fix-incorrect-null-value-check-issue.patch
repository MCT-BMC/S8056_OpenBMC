From 389e232345b353b6d1113e22ae4f0633e1925e99 Mon Sep 17 00:00:00 2001
From: John Chung <john.chung@mic.com.tw>
Date: Tue, 22 Mar 2022 15:53:07 +0800
Subject: [PATCH 22/24] fix incorrect null value check issue

---
 dbus-sdr/sensorcommands.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/dbus-sdr/sensorcommands.cpp b/dbus-sdr/sensorcommands.cpp
index 1e11d0a..5dfb15b 100755
--- a/dbus-sdr/sensorcommands.cpp
+++ b/dbus-sdr/sensorcommands.cpp
@@ -218,10 +218,12 @@ static void getSensorMaxMin(const DbusInterfaceMap& sensorMap, double& max,
         if (maxMap != sensorObject->second.end())
         {
             max = std::visit(VariantToDoubleVisitor(), maxMap->second);
+            if(std::isnan(max)) max = 0;
         }
         if (minMap != sensorObject->second.end())
         {
             min = std::visit(VariantToDoubleVisitor(), minMap->second);
+            if(std::isnan(min)) min = 0;
         }
     }
     if (critical != sensorMap.end())
-- 
2.7.4

