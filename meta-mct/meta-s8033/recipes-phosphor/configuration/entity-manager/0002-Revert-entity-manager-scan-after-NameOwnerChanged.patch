From 30dffe57e0a525bcd7ffb290050defc6ad3133f8 Mon Sep 17 00:00:00 2001
From: Osmond Chen <osmond.chen@mic.com.tw>
Date: Thu, 17 Mar 2022 11:06:07 +0800
Subject: [PATCH 2/2] Revert 'entity-manager: scan after NameOwnerChanged'

---
 src/EntityManager.cpp | 11 -----------
 1 file changed, 11 deletions(-)
 mode change 100644 => 100755 src/EntityManager.cpp

diff --git a/src/EntityManager.cpp b/src/EntityManager.cpp
old mode 100644
new mode 100755
index cc6aa12..693599f
--- a/src/EntityManager.cpp
+++ b/src/EntityManager.cpp
@@ -1066,17 +1066,6 @@ int main()
 
     nlohmann::json systemConfiguration = nlohmann::json::object();
 
-    // We need a poke from DBus for static providers that create all their
-    // objects prior to claiming a well-known name, and thus don't emit any
-    // org.freedesktop.DBus.Properties signals.  Similarly if a process exits
-    // for any reason, expected or otherwise, we'll need a poke to remove
-    // entities from DBus.
-    sdbusplus::bus::match::match nameOwnerChangedMatch(
-        static_cast<sdbusplus::bus::bus&>(*systemBus),
-        sdbusplus::bus::match::rules::nameOwnerChanged(),
-        [&](sdbusplus::message::message&) {
-            propertiesChangedCallback(systemConfiguration, objServer);
-        });
     // We also need a poke from DBus when new interfaces are created or
     // destroyed.
     sdbusplus::bus::match::match interfacesAddedMatch(
-- 
2.7.4

